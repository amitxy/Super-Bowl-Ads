---
title: "Project"
output: html_document
---

```{r eval=TRUE, include=FALSE}
library(tidyverse)
#install.packages("gtrendsR")
library(gtrendsR)
#library("docstring")
source("project_utils.R")

```

```{=html}
<style>
    p  {direction: rtl;}
    h1 {text-align: center;}
    h2 {direction: rtl;}
    h4 {direction: rtl;}
    h3 {direction: rtl;text-decoration: underline;}
    ol {direction: rtl;}
    li {direction: rtl;}
</style>
```
<h1><u>מגישים</u></h1>

::: {style="border-bottom:solid"}
:::

```{r}
fmt <- "%Y-%m-%d"

data <- get_data() # the main dataset, contains ads info
rating <- get_rating_data() # contains rating info, e.g., ads cost, viewrs and etc
general <- get_general_data() # ads categories, e.g., beer, car and etc 
```

```{r}
brands = unique(data['brand'])
brand_q <- data %>%
  group_by(brand) %>%
  summarise(count = n())

ggplot(data=brand_q, aes(x=brand, y=count))+
  geom_bar(stat = 'identity')

```

```{r}

brand <-  "Coca-Cola"
dates <-  search_dates(brand)
date=dates[5,]
date
gtopics_plot(brands=brand, date=dates[5,], rday=7)
d <- gtopics_r(brands=brand, date=dates[5,], rday=7)
d
```

```{r}
mean(filter(d$interest_over_time, date < dates[5,] )$hits)
mean(filter(d$interest_over_time, date >= dates[5,] )$hits)
```

```{r}

d$interest_over_time$date

```
