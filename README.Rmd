---
title: "README !"
output: rmarkdown::github_document
---

# Super-Bowl-Ads

# Usage and examples of project_utils package

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(gtrendsR)
source("project_utils.R")
```

import the datasets:

```{r}
fmt <- "%Y-%m-%d" 

data <- get_data() # the main dataset, contains ads info
rating <- get_rating_data() # contains rating info, e.g., ads cost, viewrs and etc
general <- get_general_data() # ads categories, e.g., beer, car and etc 
```

-   <code>search_dates</code>

    returns the dates where a brand had ads on the Superbowl

```{r}
brand <-  "Coca-Cola"
dates <-  search_dates(brand)
dates
```

-   <code>search_brands</code>

    returns the brands that had a Superbowl ad on the desired year

```{r}
brands <- search_brands(2015)
brands
```

-   <code>gtrands_plot</code>

    Will display the google trands plot, where rday is the "radius" of days before and after the ad the you with to observe so following the examples above:

```{r}
gtrends_plot(brands=brand, date=dates[2,], rday=1)
gtrends_plot(brands=brand, date=dates[2,], rday=3)
```

\*The dashed line marks the Superbowl date

If we want to compare several brands together we can use gtrend_plot as follows:

```{r}
brands_to_compare <- brands[1:3,]$brand # taking 3 companies from the exmaple above (Budweiser, Coca-Cola, Doritos)
gtrends_plot(brands=brands_to_compare, date=dates[2,], rday=1)
gtrends_plot(brands=brands_to_compare, date=dates[2,], rday=7)
```

```{r}
#remotes::install_github("trendecon/trendecon")
library(trendecon)
```

```{r}
time="2005-01-30 2005-02-13"
d <- ts_gtrends(
  keyword = c("Coca cola"),
  time = "2005-02-01 2005-02-08",
  geo     = "US"
)
d
plot(value ~ time, data=d, type='l')
```

```{r}
plot(gtrends_plot(c("Coca cola", "doritos"), date=dates[2,], 2))
```

```{r}

d2 <- gtrends(c("Coca Cola"," Doritos"), geo = "US", time="2005-02-04 2005-02-08", low_search_volume=TRUE, onlyInterest=TRUE, gprop = "web")
plot(d2)
#gtrends_plot(brands=brand, date="2005-01-30 2005-02-13", rday=1)

```

```{r}
d2
```

```{r}
x <- ts_gtrends(keyword = c("Coca cola", "Doritos"), geo = "US", time="2005-02-04 2005-02-08")
tsbox::ts_plot(x)
```

```{r}
data_consistent <- ts_gtrends_mwd(keyword = brand, geo = "US", from="2022-01-30", to=Sys.Date())
data_consistent
plot(data_consistent)
```

```{r}

```
